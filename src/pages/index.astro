---
import Layout from '../layouts/Layout.astro';
import tomatoLogo from '../assets/tomato-brain-logo.png';
import tomatoLogoDark from '../assets/tomato-brain-logo-dark.png';
import { getCollection } from 'astro:content';

// Get content from Astro Content Collections
const siteContent = await getCollection('site-content');
const outcomes = await getCollection('outcomes');
const socialLinks = await getCollection('social-links');

// Extract the data
const siteData = siteContent[0].data;
const outcomesData = outcomes.map(item => item.data);
const socialLinksData = socialLinks.map(item => item.data);
---

<Layout>
	<main class="min-h-screen">
		<!-- Header with Logo -->
		<header class="absolute top-0 left-0 right-0 z-10 p-6">
			<div class="max-w-6xl mx-auto flex justify-between items-center">
				<div class="flex items-center">
					<img src={tomatoLogo.src} alt="Tomato Brain" class="h-8" />
				</div>
			</div>
		</header>

		<!-- Hero Section -->
		<section class="pt-24 pb-16 px-6">
			<div class="max-w-4xl mx-auto text-center">
				<h1 class="text-5xl md:text-6xl font-bold text-gray-900 mb-6">
					{siteData.tagline}
				</h1>
				<p class="text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
					{siteData.description}
				</p>
			</div>
		</section>

		<!-- Video Section -->
		<section class="py-16 px-6 bg-gray-50">
			<div class="max-w-4xl mx-auto">
				<div class="aspect-video bg-black rounded-lg overflow-hidden shadow-lg">
					<iframe 
						class="w-full h-full"
						src="https://www.youtube.com/embed/MB1BExAnjZo?rel=0&modestbranding=1"
						title="Tomato Brain: Collective Intelligence Project"
						frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
						allowfullscreen>
					</iframe>
				</div>
			</div>
		</section>

		<!-- About Section -->
		<section class="py-16 px-6">
			<div class="max-w-4xl mx-auto">
				<h2 class="text-3xl font-bold text-gray-900 mb-8">The Problem</h2>
				<p class="text-lg text-gray-700 mb-6 leading-relaxed">
					Before electricity, factories ran on one giant steam engine turning a line shaft that powered every machine. When electricity arrived, most owners didn't redesign the layout—they just swapped the steam engine for one massive electric motor. Same shaft, same noise, just faster.
				</p>
				<p class="text-lg text-gray-700 mb-6 leading-relaxed">
					We keep repeating this pattern. In the 1950s, computers replaced typing pools. In the 1980s, ERPs automated paperwork. Now we're doing the same with AI: instead of rethinking how we work, we just stick the motor where the steam was.
				</p>

				<h2 class="text-3xl font-bold text-gray-900 mb-8 mt-12">The Solution</h2>
				<p class="text-lg text-gray-700 mb-6 leading-relaxed">
					We built Tomato Brain at Axia Seeds—three connected AIs that know every variety, give growing advice, and understand clients inside out. But the breakthrough wasn't automation. It was conversation.
				</p>
				<p class="text-lg text-gray-700 mb-6 leading-relaxed">
					Instead of an hour of round-robin updates, everyone shared notes beforehand. The AI clustered, compared, found patterns, tensions, and blind spots. Then when we met, we could meet to decide, not to collect information.
				</p>
				<div class="bg-tomato-50 border-l-4 border-tomato-500 p-6 my-8">
					<p class="text-lg font-semibold text-tomato-800 mb-2">Parallelise. Synthesise. Decide.</p>
					<p class="text-tomato-700">That simple rhythm changed everything.</p>
				</div>

				<h2 class="text-3xl font-bold text-gray-900 mb-8 mt-12">The Vision</h2>
				<p class="text-lg text-gray-700 mb-6 leading-relaxed">
					Our food system runs on invisible infrastructures: spreadsheets, inboxes, and decisions made in meetings. AI gives us new wiring—large language models can compress or expand information at will, translate between human mess and machine structure.
				</p>
				<p class="text-lg text-gray-700 leading-relaxed">
					If we redesign that layer, the way information moves and decisions form, we can make the entire system more adaptive, more sustainable, and maybe even more humane. Don't speed up the mess. Redesign it.
				</p>
			</div>
		</section>

		<!-- Outcomes Section -->
		<section class="py-16 px-6 bg-gray-50">
			<div class="max-w-6xl mx-auto">
				<h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">What We Built</h2>
				<div class="grid md:grid-cols-2 gap-8">
					{outcomesData.map((outcome) => (
						<a href={outcome.url} target="_blank" rel="noopener noreferrer" class="block bg-white rounded-lg shadow-lg p-8 hover:shadow-xl transition-shadow hover:scale-105 transform">
							<div class="flex items-center mb-4">
								<div class="w-12 h-12 bg-tomato-100 rounded-lg flex items-center justify-center mr-4">
									<svg class="w-6 h-6 text-tomato-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={outcome.icon}></path>
									</svg>
								</div>
								<h3 class="text-xl font-bold text-gray-900">{outcome.title}</h3>
							</div>
							<p class="text-gray-700 mb-6 leading-relaxed">
								{outcome.description}
							</p>
							<div class="inline-flex items-center text-tomato-600 font-medium">
								View on GitHub
								<svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
								</svg>
							</div>
						</a>
					))}
				</div>
			</div>
		</section>

		<!-- Social Links Section -->
		<section class="py-12 px-6 bg-white">
			<div class="max-w-4xl mx-auto text-center">
				<h3 class="text-xl font-semibold text-gray-900 mb-6">Connect with Radical Data</h3>
				<div class="flex flex-wrap justify-center items-center gap-6">
					{socialLinksData.map((link) => (
						<a href={link.url} target="_blank" rel="noopener noreferrer" class={`text-gray-600 hover:text-tomato-600 transition-colors ${link.icon ? 'flex items-center' : ''}`}>
							{link.icon && (
								<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
									<path d={link.icon}/>
								</svg>
							)}
							<span class="font-medium">{link.name}</span>
						</a>
					))}
				</div>
			</div>
		</section>

		<!-- Footer -->
		<footer class="py-12 px-6 bg-gray-900 text-white">
			<div class="max-w-4xl mx-auto text-center">
				<div class="mb-6">
					<img src={tomatoLogoDark.src} alt="Tomato Brain" class="h-12 mx-auto mb-4 opacity-80" />
					<h3 class="text-xl font-semibold mb-2">Tomato Brain</h3>
					<p class="text-gray-300">Part of Hungry EcoCities (HEC–PPE)</p>
				</div>
				<div class="text-sm text-gray-400 max-w-2xl mx-auto">
					<p class="mb-2">
						Funded by the EU (thanks, Europe!) • Part of the S+T+ARTS programme • Grant agreement No. 101069990
					</p>
					<div class="mt-6">
						<p class="text-xs text-gray-500">
							Tomato Brain is part of Hungry EcoCities (HEC–PPE)
						</p>
					</div>
				</div>
			</div>
		</footer>
	</main>
</Layout>